//
// Clearing Variables
//
$clearing-bg: rgba(0,0,0,0.8) !default;
$clearing-old-browser-bg: rgb(0,0,0) !default;
$clearing-active-img-height: 75% !default;
$clearing-caption-font-color: #fff !default;
$clearing-caption-bg: $clearing-bg !default;
$clearing-caption-old-browser-bg: $clearing-old-browser-bg !default;
$clearing-close-color: #fff !default;
$clearing-arrow-size: 16px !default;
$clearing-arrow-color: $clearing-close-color !default;
$clearing-carousel-bg: rgba(0,0,0,0.75) !default;
$clearing-carousel-old-browser-bg: $clearing-old-browser-bg !default;
$clearing-carousel-height: 150px !default;
$clearing-img-old-browser-bg: $clearing-old-browser-bg !default;
$clearing-img-bg: $clearing-bg !default;
$clearing-carousel-thumb-width: 175px !default;
$clearing-carousel-thumb-active-border: 4px solid rgb(255,255,255) !default;

//
// Clearing Mixins
//




// Clearing Styles
.clearing-blackout {
  background: $clearing-old-browser-bg;
  background: $clearing-bg;
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0; #{$defaultFloat}: 0;
  z-index: 999;

  .clearing-close { display: block; }
}

.clearing-container {
  position: relative;
  z-index: 999;
  height: 100%;
  overflow: hidden;
}

.visible-img {
  height: $clearing-active-img-height;
  position: relative;

  img {
    position: absolute;
    #{$defaultFloat}: 50%;
    top: 50%;
    margin-#{$defaultFloat}: -50%;
    max-height: 100%;
    max-width: 100%;
  }

  .clearing-caption {
    color: $clearing-caption-font-color;
    margin-bottom: 0;
    text-align: center;
    position: absolute;
    bottom: 0;
    background: $clearing-caption-old-browser-bg;
    background: $clearing-caption-bg;
    width: 100%;
    padding: 10px 100px;
  }
}

.clearing-close {
  z-index: 999;
  position: absolute;
  top: 10px;
  #{$defaultOpposite}: 20px;
  font-size: 30px;
  line-height: 1;
  color: $clearing-close-color;
  display: none;

  &:hover,
  &:focus { color: #ccc; }
}

.clearing-main-left,
.clearing-main-right {
  position: absolute;
  top: 50%;
  margin-top: -16px;
}

.clearing-main-left.disabled,
.clearing-main-right.disabled { opacity: 0.5; }

.clearing-main-left:active,
.clearing-main-right:active { margin-top: -15px; }

.clearing-main-left { left: 10px; @include css-triangle($clearing-arrow-size, $clearing-arrow-color, right); }
.clearing-main-right { right: 10px; @include css-triangle($clearing-arrow-size, $clearing-arrow-color, left); }

.block-grid.three-up > li:nth-child(3n+1) { clear: none; }

ul[data-clearing] li {
  cursor: pointer;
  display: block;

  &.clearing-feature ~ li { display: none; }
}

.clearing-assembled .clearing-container {

  .carousel {
    background: $clearing-carousel-old-browser-bg;
    background: $clearing-carousel-bg;
    height: $clearing-carousel-height;
    margin-top: 5px;
  }

  .visible-img {
    background: $clearing-img-old-browser-bg;
    background: $clearing-img-bg;
    overflow: hidden;
  }

  ul[data-clearing] {
    z-index: 999;
    width: 200%;
    height: 100%;
    margin-left: 0;
    position: relative;
    #{$defaultFloat}: 0;

    li {
      display: block;
      width: $clearing-carousel-thumb-width;
      height: inherit;
      padding: 0;
      float: $defaultFloat;
      overflow: hidden;
      background: #222;
      margin-#{$defaultOpposite}: 1px;
      position: relative;

      &.fix-height {
        img {
          min-height: 100%;
          height: 100%;
          max-width: none;
        }
      }

      img {
        cursor: pointer !important;
        min-width: 100% !important;
      }

      &.visible { border-top: $clearing-carousel-thumb-active-border; }
    }
  }
}


/* Between Medium and Small */
@media only screen and (max-width: $screenMedium) and (min-width: $screenSmall) {
  .clearing-main-right, .clearing-main-left {
    height: 100%;
    width: 40px;
    top: 0;
    border: none;
    &:before { position: absolute; top: 50%; }
  }
  .clearing-main-left {
    left: 0;
    &:before { left: 5px; @include css-triangle($clearingArrowSize,$clearingArrowColor,right); }
  }
  .clearing-main-right {
    height: 100%;
    right: 0;
    &:before { @include css-triangle($clearingArrowSize,$clearingArrowColor,left); }
  }
}

/* Small Devices ------------ */
@media only screen and (max-width: $screenSmall - 1) {
  .clearing-container { margin: 0; }
  .clearing-close { z-index: 99; font-size: emCalc(21px); top: 0px; #{$defaultOpposite}: 5px; }
  .clearing-caption { position: fixed; bottom: 0; #{$defaultFloat}: 0; padding: emCalc(10px) !important; line-height: 1.3; }
  .clearing-main-right, .clearing-main-left { display: none; }
  .clearing-blackout.clearing-assembled {
    .visible-img, .clearing-container { height: 100%; }
    ul[data-clearing] { display: none; }
  }
}
