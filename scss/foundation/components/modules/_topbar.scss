/* 
  Foundation Top Bar
  
  Requires:
    -jquery.foundation.topbar.js

  Notes:
    - <nav class="top-bar"> can have .fixed added to make it stick to the top of viewport
    - <li class="name"> creates a branding area that can be linked to homepage
      - Can include text, image or both inside this <li>.
    - <li class="divider"> creates a divider between nav items with margins on either side
    - <li class="border"> creates a divider between nav items with no margins
    - <li class="search"> Needs to hold a <form> which can use .row.collapse and pre/postfix buttons or default type="search"
*/
  
  // Variables for Top Bar
  $topBarBgColor: #333;
  $topBarHeight: 45px;
  $topBarBtmMargin: 30px;
  $topBarTitleColor: $white;
  $topBarTitleWeight: bold;
  $topBarTitleSize: ms(1);
  $topBarLinkColor: $white;
  $topBarLinkWeight: bold;
  $topBarLinkSize: ms(0) - 1;
  $topBarSearchWidth: 200px;
  $topBarBreakPoint: 800px;

  .top-bar { width: 100%; background: $topBarBgColor; height: $topBarHeight; line-height: $topBarHeight; margin: 0 0 $topBarBtmMargin; padding: 0;
    ul { list-style: none; height: $topBarHeight; line-height: $topBarHeight; width: auto; display: inline;
      li { float: left;
        a { font-weight: $topBarLinkWeight; font-size: $topBarLinkSize; display: block; color: $topBarLinkColor; line-height: $topBarHeight; height: $topBarHeight; padding: 0 $topBarHeight / 3;
          &:hover { color: darken($topBarLinkColor, 15%); }
          img { vertical-align: middle; margin-top: -5px; }
          &.active { background: darken($topBarBgColor, 5%); color: darken($topBarLinkColor, 15%); }
        }
        &.name { 
          h1 { font-weight: $topBarTitleWeight; font-size: $topBarTitleSize; line-height: $topBarHeight; margin: 0; 
            a { padding: 0 $topBarHeight / 2; font-size: inherit; }
          }
        } 
        &.border, &.divider { padding: 0; display: block; background: darken($topBarBgColor, 15%); width: 1px; height: 100%; @include box-shadow(1px 0 0 rgba(255,255,255,0.15)); margin-right: 1px; }
        &.divider { margin: 0 ($topBarHeight / 6) + 1 0 $topBarHeight / 6; }
        &.search { padding: 0 $topBarHeight / 3; height: $topBarHeight;
          form { display: inline-block; vertical-align: middle; margin-top: 1px; width: $topBarSearchWidth; min-width: $topBarSearchWidth;
            input { height: 28px; font-size: ms(0) - 1; margin-bottom: 0; }
            input[type=search] { font-size: 16px; position: relative; top: 8px; }
            .button { @include border-left-radius(0); font-size: ms(0) - 1; padding: 7px 12px 6px; top: -1px; }
          }
        }
        &.toggle-nav { display: none; }

        /* Dropdown Level 1 */
        &.has-dropdown { position: relative;
          .dropdown { /* display: none; */ position: absolute; z-index: 99; left: 0; background: $topBarBgColor; margin: 0; padding: $topBarHeight / 3 0;
            li { background: $topBarBgColor; min-width: 100%; line-height: 1; padding-bottom: 10px;
              a { white-space: nowrap; height: 100%; line-height: 1; }
              label { margin: 0; padding-left: $topBarHeight / 3; }
              &.divider { height: 2px; width: 100%; margin: 0 0 10px; background: darken($topBarBgColor, 10%); @include box-shadow(0 -1px 0 rgba(255,255,255,0.15) inset); padding: 0; }

              /* Dropdown Level 2 */
              &.has-dropdown { position: relative; 
                &>.dropdown { display: none; position: absolute; left: 100%; top: 0; }
                &:hover { 
                  &>.dropdown { display: block; }
                }
              }

            }
          } 
          &:hover { 
            .dropdown { display: block; }
          }
          a { padding-right: $topBarHeight * .75;
            &:after { margin-right: $topBarHeight / 3; @include cssTriangle(5px, #fff, top); position: absolute; top: 47%; right: 0; }
          }
        }
      }
      &.left { float: left; width: auto; }
      &.right { float: right; width: auto; }
    }
    &.fixed { position: fixed; top: 0; left: 0; }
    
  }


  @media only screen and (max-width: $topBarBreakPoint) {
    .top-bar {
      ul {
        li {
          &.toggle-nav { display: block; float: right;
            a { padding: 0 ($topBarHeight / 2); }
          } 
        }
      }
    }
  }


  // .top-bar { height: 45px; margin: 0 0 30px; padding: 0; line-height: 45px;
    
  //   a, a:hover { color: #fff; font-weight: bold; }

  //   .attached { /*position: fixed;*/ top: 0; left: 0; height: 45px; width: 100%; background: #333; border: 0 solid #000; border-width: 0 0 1px; color: #fff; font-family: "Helvetica", Arial, sans-serif; z-index: 39; 
      
  //     /* Styles for the fixed position bar itself */
  //     &>ul { display: block; margin: 0; padding: 0; 
  //       &>li { display: block; height: 45px; float: left; border-right: 1px solid #555; position: relative; }
  //       &>a, &>span { display: block; height: 45px; padding: 0 20px; border-right: 1px solid #000; font-weight: bold; }
  //       &>a small { font-size: 12px; color: #999; font-weight: normal; }
  //     }
  //     &>.name { background: #222; font-weight: bold; float: left;
  //       span { padding: 0 20px; }
  //     }

  //     /* Styles for embedded forms like search */
  //     &>ul>li>form { padding: 0 12px; border-right: 1px solid #000; height: 45px;
  //       label, .input-text { display: inline; }
  //       label { text-transform: uppercase; font-weight: bold; font-size: 10px; margin: 0 0 8px; color: #999; }
  //     }
  //     .input-text { border: 1px solid #292929; background: #555; color: #fff; border-radius: 2px; padding: 1px 3px 4px; width: 120px; }
  //     .button { padding: 3px 11px 4px; }

  //     /* Move the UL with .right to the right-hand side and adjust border */
  //     &>ul.right>li { border-left: 1px solid #000; border-right: none;
  //       &>a { border-left: 1px solid #555; border-right: none; }
  //     }

  //     /* Styles for the dropdown elements */
  //     &>ul {
  //       .dropdown { position: absolute; left: 0; top: 45px; margin: 0; padding: 8px 0; z-index: 101; background: #222; width: auto; display: none; }
  //       &>li>.dropdown { min-width: 100%; }
  //       &.right .dropdown { left: auto; right: -1px; }

  //       .dropdown>li { display: block; margin: 0; padding: 0 20px; white-space: nowrap; line-height: 1.4; position: relative;
  //         &.divider { height: 0; padding: 0; border-top: 1px solid #111; border-bottom: 1px solid #333; margin: 6px 0; }
  //         a { display: block; margin: 0 -20px; padding: 4px 20px; font-weight: normal; }
  //         label { text-transform: uppercase; font-weight: bold; font-size: 10px; margin: 0 0 8px; color: #999; }
  //       }
  //     }

  //     /* Background image (chevron) for elements with a dropdown */
  //     &>ul {
  //       .dropdown>li.has-dropdown>a, .dropdown>li.has-dropdown>span { background-image: url(../images/top-bar/dropdown-sprite.png); background-repeat: no-repeat; }
  //       &.left .dropdown>li>a, &.left .dropdown>li>span { padding-right: 28px; background-position: right -3px; }
  //       &.right .dropdown>li>a, &.right .dropdown>li>span { padding-left: 28px; background-position: left -33px; }
  //     }
      
  //     /* Positioning for the expanded sub dropdowns */
  //     &>ul {
  //       .dropdown li .dropdown { left: 100%; top: -8px; border-left: 1px solid #111; }
  //       &.right .dropdown li .dropdown { left: auto; right: 100%; border-left: none; border-right: 1px solid #111; }
  //     }

  //     a.toggle-nav { display: none; }

  //   }
    
  // }
    
  // /* Media query ensures that hover effects don't conflict on touch devices */
  // @media only screen and (min-width: 768px) {
  //   .top-bar {
  //     .attached {
  //       &>ul>li:hover>a, &>ul>li:hover>span { background: #222; }
  //       &>ul>li:hover>span { cursor: default; }
  //       &>ul .dropdown>li:hover>a { background-color: #333; }
  //       &>ul>li:hover>a+.dropdown, &>ul>li:hover>span+.dropdown { display: block; }
  //       .dropdown li:hover>a+.dropdown, .dropdown li:hover>span+.dropdown { display: block; }
  //     }
  //   }
  // }
  
  // /* Including the desktop-only hover states for IE7/8 */
  // .lt-ie9 {
  //   .top-bar {
  //     .attached {
  //       &>ul>li:hover>a, .top-bar .attached>ul>li:hover>span { background: #222; }
  //       &>ul>li:hover>span { cursor: default; }
  //       &>ul>li:hover>span+.dropdown, .lt-ie9 .top-bar .attached>ul>li:hover>a+.dropdown { display: block; }
  //       &>ul .dropdown>li:hover>a { background-color: #333; }
  //       .dropdown li:hover>a+.dropdown, .lt-ie9 .attached .dropdown li:hover>span+.dropdown { display: block; }
  //     }
  //   }
  // } 
  
  // /* Styles for smaller screens like tablets */
  // @media only screen and (max-width: 1024px) and (min-width: 768px) {
  //   .top-bar { font-size: 10px; height: 36px; line-height: 36px;
  //     .attached { height: 36px;
  //       &>.name { height: 36px; }
  //       &>ul>li { height: 36px;
  //         &>a, &>span { padding: 0 9px; height: 36px; }
  //       }
  //       &>ul.left .dropdown>li {
  //         &>a, &>span { background-position: right -4px; }
  //       }
  //       &>ul.right .dropdown>li {
  //         &>a, &>span { background-position: left -34px; }
  //       }
  //       &>ul>li form { padding: 0 12px; height: 36px; }
  //       &>ul .dropdown { top: 36px; }
  //     }
  //   }
  // }
  
  // /* Styles for mobile devices like phones */
  // @media only screen and (max-width: 767px) {
  //   .top-bar, .top-bar .attached { position: relative; background: #333; border-width: 0; }
  //   .top-bar { overflow: hidden; height: 45px; 
  //     &.expanded { height: auto !important; 
  //       .attached a.toggle-nav { border-top: none; border-bottom: 8px solid #fff; }
  //     }
  //     .attached { left: 0; border-bottom: none; height: auto; background: none; 
  //       &>ul { float: none; width: 100%; position: static; 
  //         &>li { display: block; float: none; border-right: none; border-left: none; border-bottom: 1px solid #444; margin: 0; padding: 0; height: auto; position: relative; }
  //         &:last-child>li:last-child { border-width: 0; }
  //         &>li>a, &.right>li>a, &>li form, &>li>span { border-left: none; border-right: none; border-bottom: 1px solid #222; height: auto; }
  //         &>li.active>a { background: none; }
  //         &>li.active .dropdown { display: block; visibility: hidden; }
  //         &>li form { margin-bottom: 0; padding-bottom: 12px; }
  //         &>li.has-dropdown>a, &>li.has-dropdown>span { background-image: url(../images/top-bar/dropdown-sprite.png); background-repeat: no-repeat; padding-right: 28px; background-position: right 8px; }
  //         &.right .dropwon>li>a, &.right .dropdown>li>span { padding-left: 20px; }
  //         &.right .dropdown>li.has-dropdown>a, &.right .dropdown>li.has-dropdown>span { background-image: url(../images/top-bar/dropdown-sprite.png); background-repeat: no-repeat; padding-right: 28px; background-position: right -3px; }
  //         .dropdown {
  //           &>li {
  //             &.divider { border-top: 1px solid #222; border-bottom: 1px solid #444; }
  //             &.back { margin-top: 8px; }
  //             &.back a { color: #999; padding: 5px 20px; }
  //             &.title { border-bottom: 1px solid #444; margin-bottom: 12px; }
  //             &.title h5 { border-bottom: 1px solid #222; margin: 0 -20px; padding: 0 20px 12px; color: #fff; font-weight: bold; font-size: 18px; font-size: 1.8rem; }
  //             &.title h5 a { font-size: 18px; font-size: 1.8rem; margin: 0; padding: 0; }
  //             a { padding: 5px 20px; font-weight: bold; font-size: 13px; }
  //           }
  //         }
  //       }
  //       &>.name { display: block; width: 100%; float: none; position: relative; cursor: pointer; }
  //       &>ul.right>li { border-left: none; } 
  //       &>ul>li>a small, li.title h5 small { text-transform: uppercase; font-weight: bold; float: right; position: relative; top: 2px; }
  //       .input-text { box-sizing: border-box; width: 100%; display: block; }
  //       .button { padding: 6px 11px 8px; }
  //       a.toggle-nav { display: block; height: 0; width: 0; position: absolute; right: 20px; top: 0; border-left: 8px solid transparent;border-right: 8px solid transparent; border-top: 8px solid #fff; top: 20px; }
  //     }

  //     /* Slide Styles */
  //     .attached, .attached>.name { -webkit-transition: left 0.2s linear; transition: left 0.2s linear; }

  //     /* Override for the default states */
  //     .attached > ul .dropdown { padding-top: 0; padding-bottom: 0; }

  //     /* Base styles for the subsequent dropdown */
  //     .attached  {
  //       li.active { position: static !important; 
  //         &>a+.dropdown { display: block; visibility: hidden; width: 100%; top: 0; position: absolute; background: #333; border-left: none; }
  //       }
  //     }
  //     .attached li.active>a+.dropdown { display: block; visibility: visible; left: 100%; }
  //     .attached>ul>li.active>a+.dropdown { top: 45px; }
  //   }    
  // }


